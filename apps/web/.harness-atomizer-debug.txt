=== Atomizer Debug Output (2025-12-12T21:53:10.387Z) ===
SUCCESS: true
ERROR: none
OUTPUT LENGTH: 7049

OUTPUT:
```json
[
  {
    "id": "F021",
    "title": "Create calendar view database query function",
    "type": "feature",
    "description": "Create a Supabase RPC function or API endpoint to fetch shifts data formatted for calendar display. Query should join shifts table with medical_staff, facilities, and related tables to get complete shift details including doctor name, facility name, specialty, date, and time. Support filtering by date range, facility, and specialty. Return data structured for calendar rendering.",
    "acceptance_criteria": [
      "Database function or API endpoint created to fetch shifts with all related data",
      "Query includes joins for medical_staff (doctor info) and facilities",
      "Date range filtering implemented (start_date, end_date parameters)",
      "Optional filtering by facility_id and specialty implemented",
      "Response format optimized for calendar display (grouped by date)"
    ],
    "passes": false
  },
  {
    "id": "F022",
    "title": "Create shifts calendar data hook",
    "type": "feature",
    "description": "Create a custom React hook (useShiftsCalendar) to fetch and manage calendar data. Hook should handle loading states, error handling, filtering parameters, and data transformation. Use React Query or SWR for caching and automatic refetching. Transform API response into format suitable for calendar component consumption.",
    "acceptance_criteria": [
      "Custom hook created in src/hooks/useShiftsCalendar.ts",
      "Loading, error, and success states properly managed",
      "Filtering parameters (dateRange, facilityId, specialty) supported",
      "Data cached and refetched appropriately",
      "TypeScript interfaces defined for calendar data structure"
    ],
    "passes": false
  },
  {
    "id": "F023",
    "title": "Install and configure calendar library",
    "type": "feature",
    "description": "Install react-big-calendar or similar calendar library compatible with the tech stack. Configure with date-fns for date handling (already in project). Set up TypeScript types and create base calendar wrapper component with Portuguese locale. Apply Tailwind CSS styling to match project design system.",
    "acceptance_criteria": [
      "Calendar library installed (react-big-calendar or alternative)",
      "Library configured to use date-fns as date adapter",
      "Portuguese locale (pt-BR) configured for calendar",
      "Base CalendarWrapper component created with proper TypeScript types",
      "Tailwind CSS custom styles applied to match design system"
    ],
    "passes": false
  },
  {
    "id": "F024",
    "title": "Create ShiftsCalendar display component",
    "type": "feature",
    "description": "Build the main ShiftsCalendar component in src/components/organisms/ that renders the calendar with shifts data. Display each shift as an event showing doctor name and facility. Implement month, week, and day views. Add color coding by specialty or facility. Handle click events to trigger detail modal. Include loading skeleton and empty states.",
    "acceptance_criteria": [
      "ShiftsCalendar component created in src/components/organisms/",
      "Calendar displays shifts with doctor and facility information",
      "Month, week, and day views implemented and switchable",
      "Color coding applied (by specialty or facility)",
      "Click handlers implemented for shift events",
      "Loading skeleton and empty state UI included"
    ],
    "passes": false
  },
  {
    "id": "F025",
    "title": "Create ShiftDetailModal component",
    "type": "feature",
    "description": "Create a modal component to display detailed shift information when user clicks on a calendar event. Show complete details: doctor name, specialty, facility name, facility address, shift date, start/end time, status, and any notes. Use Radix UI Dialog primitive consistent with project patterns. Include close button and proper accessibility attributes.",
    "acceptance_criteria": [
      "ShiftDetailModal component created using Radix UI Dialog",
      "Displays all shift details: doctor, specialty, facility, date, time, status",
      "Facility address displayed if available",
      "Modal opens/closes smoothly with proper animations",
      "Proper ARIA labels and keyboard navigation (ESC to close)",
      "Styled with Tailwind CSS matching design system"
    ],
    "passes": false
  },
  {
    "id": "F026",
    "title": "Create calendar filter controls component",
    "type": "feature",
    "description": "Build CalendarFilters component with controls for filtering calendar view. Include date range picker (using existing date picker from shadcn/ui), facility dropdown, and specialty dropdown. Integrate with useShiftsCalendar hook to update calendar data. Add clear filters button. Style consistently with existing filter components in the project.",
    "acceptance_criteria": [
      "CalendarFilters component created in src/components/molecules/",
      "Date range picker implemented using shadcn/ui date picker",
      "Facility dropdown populated with user's accessible facilities",
      "Specialty dropdown with available specialties",
      "Clear filters button resets all filters to default",
      "Filters properly update calendar data through hook"
    ],
    "passes": false
  },
  {
    "id": "F027",
    "title": "Create Escalas (Shifts) calendar page",
    "type": "feature",
    "description": "Create the main Escalas page in src/app/dashboard/escalas/ that integrates ShiftsCalendar, CalendarFilters, and ShiftDetailModal components. Add page header with title 'Calendário de Escalas'. Implement proper layout using existing dashboard layout patterns. Add organization-based access control to ensure admin sees only their organization's shifts. Handle modal state management.",
    "acceptance_criteria": [
      "Escalas page created at src/app/dashboard/escalas/page.tsx",
      "Page header with 'Calendário de Escalas' title",
      "ShiftsCalendar, CalendarFilters integrated in proper layout",
      "Modal state properly managed (open/close with selected shift)",
      "Organization-based filtering enforced (RLS or client-side)",
      "Page responsive and matches dashboard design patterns"
    ],
    "passes": false
  },
  {
    "id": "F028",
    "title": "Add calendar navigation to dashboard menu",
    "type": "feature",
    "description": "Add 'Calendário de Escalas' navigation link to the dashboard sidebar/menu. Use appropriate Lucide React icon (Calendar or CalendarDays). Ensure link is only visible to admin users. Update navigation component to highlight active route when on calendar page. Position logically near other shift-related menu items.",
    "acceptance_criteria": [
      "Calendar navigation link added to dashboard menu",
      "Appropriate icon from Lucide React used",
      "Link only visible to users with admin role",
      "Active route highlighting works correctly",
      "Link positioned logically in menu structure"
    ],
    "passes": false
  }
]
```

=== End of Output ===